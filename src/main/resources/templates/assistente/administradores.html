<!DOCTYPE html>
<html lang="pt" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
   <head>
    <title>Administrador</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous"/>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/webjars/org.webjars/bootstrap/5.3.1/js/bootstrap.min.js" crossorigin="anonymous" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" rel="stylesheet" />
        <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/webjars/org.webjars/bootstrap/5.3.1/js/bootstrap.min.js}"/>

        <link th:href="@{/css/recuperar-senha.css(v=${version}) }" rel="stylesheet" />
        <link th:rel="stylesheet" type="text/css" media="all"  th:href="@{/css/index.css}"/>
        <link rel="icon" th:href="@{/image/favicon.ico}" />
    </head>
    <body>
        <div th:insert="fragments/menuindex" />



        <section class="layout-content" layout:fragment="content">
            <main role="main">                


                <div class="album py-5 bg-light">
                    <div class="container d-flex justify-content-center">

                        <form class="form-signin was-validated" th:object="${usuario}" method="post" th:action="@{/api/u/registrar}">	



                            <div class="row">  

                                <div class="full-width">
                                    <label for="nome">Nome</label>
                                    <input  type="text"  name="nome"   placeholder="Ex.: comercio@tst.com" required />
                                </div>

                                <div class="full-width">
                                    <label for="email">E-mail</label>
                                    <input name="email" type="email"    placeholder="Ex. connosco@gestao.com"/>
                                </div>

                                <div class="full-width">
                                    <label for="password">senha</label>
                                    <input n type="password"  name="password"   placeholder="Ex.: 123" required/>
                                </div>





                                <div class="mb-3">
                                    <label class="form-check-label" for="perfis"><b>Perfil</b></label>
                                    <th:block th:each="perfis : ${perfis}" >
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" th:value="${perfis.p}" th:text="${perfis.p}" id="perfis"  th:field="*{perfis}" />
                                        </div>
                                    </th:block>
                                    <div class="invalid-feedback">Pelo menos um perfil é requerido.</div>

                                </div>



                               

                                <input type="hidden" th:field="*{id}"> 


                            </div>   


                            <div  class="action">
                                <button  type="button" [mat-dialog-close]="false">Cancelar</button>
                                <button class="btn btn-lg btn-primary btn-block" type="submit">salvar</button>
                                <a class="btn btn-dark btn-lg " role="button" aria-pressed="true" th:href="@{/}"><i class="fas fa-home"></i>&nbsp;início</a>

                            </div>        

                        </form>
                    </div>
                </div>
            </main>

            <footer th:replace="fragments/footer :: footer"/>

            <script th:inline="javascript" th:fragment="inlinescript">
                $('#perfis').ready(function () {
                    //var perfis = [[usuario.roleds]];
                   // $.each(perfis, function (k, v) {
                   //     $('#perfis: checkbox[value"' + v.id + ' "] ').attr('checked', 'checked');
                  //  });
                });
            </script>
            <script th:src="~{}" th:fragment="js"></script>
            <script th:inline="javascript" th:fragment="inlinescript"></script>
            <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
    </body>
</html>
